<!DOCTYPE html>
<!--
  ~ Project:sparrow nest
  ~ LastModified:18-4-22 下午4:29 by sukimiya
  ~
  ~ Copyright (C) 2018.  e2x.io
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<script src="${ctxPath}/js/jquery.min.js" type="text/javascript"></script>
<script src="${ctxPath}/js/popper.min.js" type="text/javascript"></script>
<script src="${ctxPath}/js/bootstrap.bundle.min.js" type="text/javascript"></script>
<script src="${ctxPath}/js/switchery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {

        var topheight = $(".navbar")[0].clientHeight;
        var bottomheight = $(".navbar")[1].clientHeight;
        $(".body-content").css("height",window.innerHeight - bottomheight-topheight);

        var elems = Array.prototype.slice.call(document.querySelectorAll('.js-switch'));

        elems.forEach(function(html) {
            var switchery = new Switchery(html,{ color: '#482B0D', jackColor: '#FFFFFF' });
        });

        for(var i=0;i<$(".nav-link").length;i++){
            var nvitem = $(".nav-link")[i];
            if(nvitem&&nvitem.href){
                if(window.location.href==nvitem.href){
                    if(nvitem.parentElement){
                        nvitem.parentElement.classList.add("active");
                    }
                }
            }
        }

        for(var i=0;i<$(".current-title").length;i++){
                var nvitem = $(".current-title")[i];
            var cryary = window.location.pathname.split("/");
            nvitem.textContent = cryary[cryary.length-1];
        }
    });
    function showLoading(element) {
        var loadingEl = document.createElement("div");
        loadingEl.classList.add("loadingBar");
        loadingEl.classList.add("fade");


        var loader = document.createElement("div");
        loadingEl.innerHTML = '<div class="warpLogo"><div class="warpLog-row"><div class="logo"></div></div></div><div class="loader"><svg class="circular" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/></svg></div>';

        if(element!=null){
            element.appendChild(loadingEl);
        }else{
            document.body.appendChild(loadingEl);
        }
        var onLoadingClick = function(event){
            element.removeChild(loadingEl);
            event.currentTarget.removeEventListener("click",onLoadingClick);
        }
        loadingEl.addEventListener("click",onLoadingClick);
        setTimeout(function(){
                        loadingEl.classList.add("show");
                    },100);
    }
    function removeLoading(element) {
        $(".loadingBar").remove();
    }
</script>